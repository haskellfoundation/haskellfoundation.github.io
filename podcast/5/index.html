<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="76x76" href="../../assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="../../assets/favicon/site.webmanifest">
  <link rel="mask-icon" href="../../assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">

  <!-- other -->
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1" data-ssr name="viewport">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Maven+Pro:wght@400;500;700&family=Playfair+Display:wght@400;600;800&display=swap" rel="stylesheet">
  <link href="../../assets/fontawesome-free-5.15.2-web/css/all.css" rel="stylesheet">
  <link href="../../assets/fontawesome-free-5.15.2-web/css/regular.css" rel="stylesheet">
  <link href="../../assets/fontawesome-free-5.15.2-web/css/brands.css" rel="stylesheet">
  <link rel="stylesheet" href="../../assets/css/main.css">
  <link rel="alternate" type="application/rss+xml" href="https://feeds.buzzsprout.com/1817535.rss">
  <script src="../../assets/js/main.js" defer></script>
  <!-- from https://stackoverflow.com/questions/33986976/how-can-i-remove-a-buggy-service-worker-or-implement-a-kill-switch/62154131#62154131
        attempt to fix: https://github.com/haskellfoundation/haskellfoundation.github.io/issues/70
  -->
  <script>
    if (navigator && navigator.serviceWorker && navigator.serviceWorker.getRegistration) {
      navigator.serviceWorker.getRegistration('/').then(function(registration) {
        if (registration) {
          registration.update();
          registration.unregister();
        }
      });
    }
  </script>

  <!-- metadata -->
  <title>Chris Smith</title>
  <meta property="og:title" content="Chris Smith">
  
  <meta property="og:description" content="Chris Smith is interviewed by Joachim Breitner and Andres LÃ¶h. Chris is
the author of the CodeWorld teaching tool and discusses why too much
curry in the language can make error messages hard to digest and why a
self respecting testing library certainly should be used to test itself.
">
  

</head>

<body class="relative">

  <!-- This is the mobile fly-out menu - outside document flow. -->
  <div id="nav-backdrop" class="fixed z-10 inset-0 hidden"></div>

<div id="mobile-nav" class="fixed z-20 top-0 right-0 w-full sm:w-1/2 max-h-full overflow-auto hidden rounded-b shadow-lg bg-white px-4">

  <div class="pt-6 flex justify-between">

    <div>
      <img src="../../assets/images/logos/hf-logo-100-alpha.png" width="68" height="52" alt="Logo of the Haskell Foundation" />
      <div class="text-sm mt-2 text-gray-500">The Haskell Foundation</div>
    </div>

    <div class>
      <button id="mobile-nav-close" type="button" class="inline-flex items-center justify-center p-2 rounded text-purple-800 shadow-lg focus:outline-none">
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>

  </div>

  <div class="mt-6">
    <a href="../../" class="block py-3 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">Home</a>

    <div class="block py-3 border-t border-gray-320 text-lg font-medium text-gray-500">About</div>
    <a href="../../who-we-are" class="block py-3 pl-6 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">Current Board</a>
    <a href="../../who-we-are/past-boards" class="block py-3 pl-6 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">Past Boards</a>
    <a href="../../contact" class="block py-3 pl-6 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">Contact</a>
    <a href="../../vision" class="block py-3 pl-6 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">Vision</a>
    <a href="../../careers" class="block py-3 pl-6 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">Careers</a>

    <a href="../../podcast" class="block py-3 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">Podcast</a>

    <a href="../../projects" class="block py-3 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">Projects</a>

    <a href="../../donations" class="block py-3 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">Sponsorship</a>

    <div class="block py-3 border-t border-gray-320 text-lg font-medium text-gray-500">Affiliates</div>
    <a href="../../affiliates" class="block py-3 pl-6 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">Affiliates</a>
    <a href="../../affiliates/about" class="block py-3 pl-6 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">About Affiliating</a>

    <div class="block py-3 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium text-gray-500">News and Info</div>
    <a href="../../news" class="block py-3 pl-6 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">News</a>
    <a href="https://haskell-foundation.medium.com/" class="block py-3 pl-6 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">Blog</a>
    <a href="../../news/press" class="block py-3 pl-6 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">Press</a>
    <a href="../../resources" class="block py-3 pl-6 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">Resources</a>
    <a href="../../faq" class="block py-3 pl-6 border-t border-gray-320 hover:bg-gray-100 text-lg font-medium">FAQ</a>

  </div>

</div>


  <!-- Document flow begins here -->
  <div class="min-h-screen flex flex-col">
    <div>
      <nav class="max-w-screen-xl mx-auto px-4 pt-6 sm:pt-12 sm:px-6 flex items-center justify-between justify-self-stretch">

  <div>
    <a href="../../">
      <img src="../../assets/images/logos/hf-logo-100-alpha.png" alt="The Haskell Foundation homepage" />
      <div class="text-sm mt-2 text-gray-500"></div>
    </a>
  </div>

  <nav class="hidden lg:block">
    <ul class="flex space-x-8 xl:space-x-12">


      <li class="relative">
        <a href="../../who-we-are" id="who-we-are-nav-item">About</a>

        <div class="pt-2 absolute top-full w-44 bg-white shadow-md z-10 hidden" id="who-we-are-nav-item-menu">

          <a class="block p-4 border-t-2 hover:bg-gray-50 cursor-pointer" href="../../who-we-are">
            Current Board
          </a>

          <a class="block p-4 border-t-2 hover:bg-gray-50 cursor-pointer" href="../../who-we-are/past-boards">
            Past Boards
          </a>

          <a class="block p-4 border-t-2 hover:bg-gray-50 cursor-pointer" href="../../contact">Contact</a>


          <a class="block p-4 border-t-2 hover:bg-gray-50 cursor-pointer" href="../../vision">Vision</a>
          <a class="block p-4 border-t-2 hover:bg-gray-50 cursor-pointer" href="../../careers">Careers</a>
        </div>

      </li>

      <li class="relative">
        <a href="../../podcast">Podcast</a>
      </li>

      <li class="relative">
        <a href="../../projects">Projects</a>

      </li>

      <li class="relative">
        <a href="../../partnerships">Partnerships</a>
      </li>

      <li class="relative">
        <a href="../../donations">Sponsorship</a>

      </li>

      <li class="relative">
        <a href="../../affiliates" id="affiliates-nav-item">Affiliates</a>

        <div class="pt-2 absolute top-full w-44 bg-white shadow-md z-10 hidden" id="affiliates-nav-item-menu">

          <a class="block p-4 border-t-2 hover:bg-gray-50 cursor-pointer" href="../../affiliates">
            Affiliates
          </a>

          <a class="block p-4 border-t-2 hover:bg-gray-50 cursor-pointer" href="../../affiliates/about">
            About Affiliating
          </a>

        </div>

      </li>

      <li class="relative">
        <a href="../../news" id="news-nav-item">News and Info</a>

        <div class="pt-2 absolute top-full w-44 bg-white shadow-md z-10 hidden" id="news-nav-item-menu">

          <a class="block p-4 border-t-2 hover:bg-gray-50 cursor-pointer" href="../../news">
            News
          </a>

          <a class="block p-4 border-t-2 hover:bg-gray-50 cursor-pointer" href="https://haskell-foundation.medium.com/">
            Blog
          </a>

          <a class="block p-4 border-t-2 hover:bg-gray-50 cursor-pointer" href="../../news/press">
            Press
          </a>

          <a class="block p-4 border-t-2 hover:bg-gray-50 cursor-pointer" href="../../resources">Resources</a>

          <a class="block p-4 border-t-2 hover:bg-gray-50 cursor-pointer" href="../../faq">FAQ</a>
        </div>

      </li>

    
      <li class="relative">
          <a class="dbox-donation-page-button" href="https://donorbox.org/donation-button-52?" style="background: rgb(94, 80, 134); color: rgb(255, 255, 255); text-decoration: none; font-family: Verdana, sans-serif; display: flex; gap: 8px; width: fit-content; font-size: 16px; border-radius: 5px; line-height: 24px; padding: 8px 24px;"><img src="https://donorbox.org/images/white_logo.svg">Donate</a>
      </li>
    </ul>
  </nav>

  <div class="absolute right-0 lg:hidden self-start">
    <button id="mobile-nav-open" type="button" class="mr-4 flex items-center justify-center p-2 rounded text-purple-800 shadow-lg focus:outline-none" aria-label="Main menu" aria-haspopup="true">
      <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </div>

</nav>

    </div>

    <div class="flex-grow">
      <div class="max-w-screen-xl mx-auto py-16 md:py-24">
  <div class="sm:px-6 lg:px-16">
  <div class="relative">
    <div class="absolute top-0 left-0 border-t border-l border-purple-50 h-10 md:h-20 w-10 md:w-20">
      <div class="absolute top-1 md:top-2 left-1 md:left-2 border-t border-l border-purple-100 h-10 md:h-20 w-10 md:w-20">
        <div class="absolute top-1 md:top-2 left-1 md:left-2 border-t border-l border-purple-200 h-10 md:h-20 w-10 md:w-20">
          <div class="absolute top-1 md:top-2 left-1 md:left-2 border-t border-l border-purple-300 h-10 md:h-20 w-10 md:w-20">
            <div class="absolute top-1 md:top-2 left-1 md:left-2 border-t border-l border-purple-400 h-10 md:h-20 w-10 md:w-20">
              <div class="absolute top-1 md:top-2 left-1 md:left-2 border-t border-l border-purple-500 h-10 md:h-20 w-10 md:w-20"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="absolute top-0 right-0 border-t border-r border-purple-50 h-10 md:h-20 w-10 md:w-20">
      <div class="absolute top-1 md:top-2 right-1 md:right-2 border-t border-r border-purple-100 h-10 md:h-20 w-10 md:w-20">
        <div class="absolute top-1 md:top-2 right-1 md:right-2 border-t border-r border-purple-200 h-10 md:h-20 w-10 md:w-20">
          <div class="absolute top-1 md:top-2 right-1 md:right-2 border-t border-r border-purple-300 h-10 md:h-20 w-10 md:w-20">
            <div class="absolute top-1 md:top-2 right-1 md:right-2 border-t border-r border-purple-400 h-10 md:h-20 w-10 md:w-20">
              <div class="absolute top-1 md:top-2 right-1 md:right-2 border-t border-r border-purple-500 h-10 md:h-20 w-10 md:w-20"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="text-center pt-12 md:pt-20 px-12 sm:px-16 md:px-24 lg:px-36 ">
    <h1 class="text-2xl-5xl"><b>5</b> â Chris Smith</h1>
  </div>
</div>

<div class="max-w-screen-xl mx-auto">
  <div class="mx-auto prose md:prose-lg">
    <div class="space-y-8 max-w-2xl my-7 mx-auto">
      
      <p><em>Recorded 2021-10-21. Published 2021-11-12.</em></p>
      
      <p>Chris Smith is interviewed by Joachim Breitner and Andres LÃ¶h. Chris is the author of the CodeWorld teaching tool and discusses why too much curry in the language can make error messages hard to digest and why a self respecting testing library certainly should be used to test itself.</p>
    </div>
  </div>

  <div class="mx-auto prose md:prose-lg my-6">
    <div id="buzzsprout-player-9537767"></div>
    <script src="https://www.buzzsprout.com/1817535/9537767.js?container_id=buzzsprout-player-9537767&player=small" type="text/javascript" charset="utf-8"></script>
  </div>

  
  <div class="mx-auto prose md:prose-lg my-6">
    <div class="flex items-center space-x-4">
      <!--
       TODO: Insert nice icon
       <div>
         <img class="h-10 md:h-16 lg:h-20" src="/assets/images/affiliated.svg" alt="">
       </div>
       -->
      <h2 class="text-2xl font-normal">Related links</h2>
    </div>
    <div class="border-l-3 border-gray-300 ml-5 md:ml-8 lg:ml-10 pl-4 md:pl-8 lg:pl-14 pr-4">
      <ul>
<li><a href="https://twitter.com/cdsmithus">Chris on twitter</a></li>
<li><a href="https://cdsmithus.medium.com/">Chris webpage</a></li>
<li><a href="https://code.world/">CodeWorld</a></li>
<li><a href="https://sarabander.github.io/sicp/html/index.xhtml">Structure and Interpretation of Computer Programs</a></li>
<li><a href="https://hackage.haskell.org/package/gloss">Gloss Graphics Library</a></li>
<li><a href="https://haskell-via-sokoban.nomeata.de/">Sokoban in CodeWorld</a></li>
<li><a href="https://hackage.haskell.org/package/codeworld-api">Graphics library for the CodeWorld</a></li>
<li><a href="https://dl.acm.org/doi/10.1145/3110247">Lock-step simulation is childâs play</a></li>
<li><a href="https://groq.com/">Groq, Inc</a></li>
<li><a href="https://hackage.haskell.org/package/HMock-0.1.0.1">HMock</a></li>
<li><a href="https://wiki.haskell.org/Haskell_program_coverage">Haskell Program Coverage (hpc)</a></li>
<li><a href="https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/37267.pdf">The Snap Framework</a></li>
<li><a href="https://cdsmithus.medium.com/">Co-Hacks</a></li>
</ul>
    </div>
  </div>
  

  
  <div class="mx-auto prose md:prose-lg my-6">
    <div class="flex items-center space-x-4">
      <!--
       TODO: Insert nice icon
       <div>
         <img class="h-10 md:h-16 lg:h-20" src="/assets/images/affiliated.svg" alt="">
       </div>
       -->
      <h2 class="text-2xl font-normal">Transcript</h2>
    </div>
    <div class="space-y-8 max-w-2xl my-7 mx-auto">
      <em>This transcript may contain mistakes. Did you find any?
      <a href="https://github.com/haskellfoundation/haskellfoundation.github.io/edit/hakyll/podcast/5/transcript.markdown">Feel free to fix them!</a></em>
    </div>
    <div class="border-l-3 border-gray-300 ml-5 md:ml-8 lg:ml-10 pl-4 md:pl-8 lg:pl-14 pr-4">
      <p><em>Joachim Breitner:</em> Welcome to the Haskell Interlude episode with Chis Smith author of the CodeWorld teaching tool. Stay tuned to hear why too much curry in the language can make error messages hard to digest and why a self respecting testing library certainly should be used to test itself.</p>
<p><em>Andres LÃ¶h:</em> Hello!</p>
<p><em>JB:</em> and our guest Chris Smith calling in from Atlanta.</p>
<p><em>Chris Smith:</em> Hello!</p>
<p><em>JB:</em> Chris Smith has built CodeWorld which is a place for people to learn about computational thinking and math and also Haskell and I want to note to so get started with how did you get to know Haskell and what made you be involved so much with Haskell.</p>
<p><em>CS:</em> Oh yeah, I actually found Haskell somewhat indirectly and somewhat early in my programming career. I was trying to branch out and learn new things and I ran across video recordings of Ableson and Sussmanâs SICP lectures. So I started watching these with colleagues from work at the time and they started talking about this language Miranda which was really fascinating to the things that they said about Miranda sounded really attractive and so I went looking for this programming language. Well this was in the 2000 so I did not find it but I did find that its sort of successor in some sense was Haskell. So at that point I started learning Haskell just as a way to broaden my own understanding of you know of the world of the programming language world in particular. Um, so thatâs what brought me to the language.</p>
<p><em>JB:</em> And how did you get from there to building CodeWorld? What is the the origin of CodeWorld or maybe what is CodeWorld first us so that people who donât know it in the audience will recognize this.</p>
<p><em>CS:</em> Yeah, yeah, sure so what CodeWorld is? Itâs a web-based platform built on top of GHCJS so cross compiling Haskell to JavaScript. Which lets anyone sort of go to this webpage write some Haskell code without installing anything in advance click run it sort of builds into JavaScript code and runs in their web browser and it comes with a graphics library so that itâs really easy to do really simple graphics programming and some other things like that. Ah basically the idea is to be able to get some like high impact graphic you know, graphical exciting code with a minimum of upfront investment. Not just that though. Itâs also designed to really emphasise the kind of mathematical thinking and algebraic thinking background of the Haskell programming language and the reason for that actually is a great transition to where CodeWorld came from. The story behind the CodeWorld environment comes down to my neighbor who lived next door to me when I lived in Colorado. She was a teacher at a middle school and at one point she decided that she wanted to leave the school that she taught at and start her own school in her own living room next door to my house. So I talked to her about what she was doing and she was really passionate about teaching history and social sciences and reading and literature but she sort of came to me and said well what can I do with mathematics that makes it not just working through math worksheets. But doing something that really teaches a fundamental understanding of mathematics and so my first year that she was doing this I went over there a couple of days a week and I taught a class on recreational Mathematics. So we did a lot of sort of traditional proof-based mathematics in terms of exploring the Towers of Hanoi. Exploring you know the art gallery problem. You know things graph theory and combinators problems and things like that.</p>
<p><em>JB:</em> What is the art gallery problem?</p>
<p><em>CS:</em> Oh the art gallery problem is the question if you give me an arbitrary polygon with n vertices how many points whatâs the the most points that I may need to pick such that there is a line in the interior of the polygon from each point to any other point in the interior of the polygon. So the idea is like suppose you made an art gallery with some polygon shape. How many places do you need to post guards so that they can see the entire interior of this art gallery.</p>
<p><em>JB:</em> Okay, so what is the age group that you are teaching to.</p>
<p><em>CS:</em> Yeah, so the school was interesting. It started it only had 6 students to start with and the first year it was sixth grade which is 11 to 12 years old the next year it was the same students in seventh grade and the next year it was the same students in eighth grade and then it went back to sixth grade again the year after that so it sort of cycled through this 3 year period so that any set of students could be at the school for 3 years,</p>
<p><em>JB:</em> But there was still just math that you were doing teaching there.</p>
<p><em>CS:</em> Yeah, so the first year it was it mathematics and then towards the end of that year I was just thinking through the question of whatâs a way that I can take mathematics. It was a lot of fun to run these recreational mathematics problems but it was also a lot of very top-down learning. It was very much I would show up 1 day and tell them what we were going to talk about this day and teach them and I wasnât really happy with this and so I thought whatâs a way that you can do mathematics but you can do it sort of in a self-led creative manner. And so this is where CodeWorld came in and the idea that I try to make underlying the environment is that itâs computer programming using algebra and if you think about it at the sort of very basic level thatâs sort of what Haskell is; You know writing essentially just algebraic equalities they happen to be defining something on the left hand side of an equal sign but you can think of them as actually making statements of equality that that result in those definitions and then you know by doing so you can define what you want. So the idea was to try to keep computer programming as declarative as mathematical as possible and to provide an environment where essentially youâre just writing out algebra. But itâs computer programming. Haskell turns out to be a great fit for this style of programming. And not just Haskell but there are some specific techniques like the gloss style graphics approach where you have you know a state transition function and a function from state to picture and you just iterate these functions in order to produce an application so within Haskell this was popularized at a library called gloss outside of Haskell it was popularized in racket with itâs called the universe model Iâve heard it called many things in many different functional programming communities. I tend to call it referred to it as functional mvc or functional model view controller as ah, a sort of generic name for it. But yeah, thatâs basically the idea is can we take a programming language and it turns out Haskell was ah a nice one because Haskell is almost there already and turn it into something which is just writing down algebra as a programming language.</p>
<p><em>AL:</em> So was it immediately clear to you when these ideas started forming in your head that you would have to design something like CodeWorld or did you first think you could somehow just use Haskell directly.</p>
<p><em>CS:</em> Yeah, so the first year I did just use Haskell directly and the resulting software that I wrote looked nothing like what I ended up with. It actually compiled and ran applications on a server and then streamed frames from the server to the client and streamed UI events from the client to the server it was built on top of this extension called Safe Haskell which allows you to sort of run code on the server but control what it does so there are a lot of like of little bits like this ah and you know around the so and initially it was a very different architecture but and it was very much straight Haskell as well. Um, it was a sort of second iteration of this. So after that experience I taught with this for several years in Colorado and then I moved from Colorado out to California to work for Google and while I was working for Google after a year or so to acclimatise myself to a completely different culture I went back and thought through if I were doing this again what would I do and so I originally built a second version in something called faith which is one of Chris Doneâs projects ran into some limitations there and was encouraged to try GHCJS and I was able to build something on top of GHCJS and then at the same time thatâs when I started thinking more about okay I have Haskell okay. But there are a lot of things in Haskell that are not part of the learning objectives of learning mathematics and so can I come up with a simpler programming language and because I did not want to write a new compiler. My constraint from the beginning was it will be Haskell but it will be Haskell with simplifications simplifications imposed on top of it.</p>
<p><em>AL:</em> What kind of simplifications.</p>
<p><em>CS:</em> Yeah, yeah, what kind of simplifications? Number one is that I rewrote the entire standard library using the Rebindable syntax extension and a bunch of new types so that youâre not dealing with a lot of the legacy craft around the string data type for example. Also so that thereâs just sort of Javascript style. Thereâs one number data type which happens to be a double but represents exact Ints at small enough ranges. Because that it certainly avoids a lot of the complexity of overloading and type classes things like that. I committed some horrible Haskell atrocities that actually helped me out by writing a JavaScript function that would implement arbitrary equality comparison of values with no type class constraints by walking the Javascript heap representation used by GHCJS in order to again, get type classes out of this. Type classes, you know are very powerful and a great technique but they are the start of where Haskell starts to get complicated. And so I wanted to stop short of that. Another change that I made was to uncurry the entire standard library and that was actually based on my experience teaching from my original implementation. I had learned that a lot of the most confusing and complicated error message situations came from forgetting a parameter and then having the result misinterpreted as some higher order function which was partially applied so undoing that currying in the standard library and writing a completely uncurried standard library gives the language a completely different feel but itâs all still Haskell. You can do this and itâs valid Haskell it just is Haskell with constraints.</p>
<p><em>AL:</em> So youâre basically reusing the entire front end of GHC still. Itâs like the original parser</p>
<p><em>CS:</em> Yes, the current state of CodeWorld is that it runs a sort of a preprocessing step where it parses the code in GHCâs parser and then uses a bunch of like scrap your boilerplate rules and things like that to match certain patterns and reject them in advance before it will actually even try to compile the code. But if you pass all of those rules eventually it takes your code and just passes it along to GHC.</p>
<p><em>JB:</em> And these rules are only predicates to check something. They donât change the code. Youâre not preprocessing in that sense.</p>
<p><em>CS:</em> For the most part yes. The one place where I ended up having to change the code is I wanted to do. Oh this is maybe a little off in the weeds. I wanted to do this feature called Import by hash. One of the the features that has been really interesting in CodeWorld is whenever you run a code run a program it just hashes your source code for the program and builds you a url with this hash in it, which you can then refer to to share the program with other people and so on. I wanted you to be able to also take that hash and say import the code with this hash but then that did require making some modifications to the code for some just complicated reasons where you know if you had declared a module name or the module name had to be the hash of the source code. But of course the hash of the source code depends on the module name. So it uses the hash of the original source code but then modifies the source code to change the module name and so on. But thatâs a corner case in which the code is modified but outside of that import by hash feature that is absolutely true that whatever code you write is the code that is given to GHC.</p>
<p><em>JB:</em> So you said you uncurried because itâs confusing when you leave all the parentheses. But I expect that well okay, now you still leave all the arguments you still get an error message that is completely unhelpful and tells you something about higher order functions.</p>
<p><em>CS:</em> Well well it doesnât tell you about high order functions. It actually comes in and tells you hey I expected the type number number text and I found number number.</p>
<p><em>JB:</em> Oh but if you completely forget the argument list then you still get the confusing error message.</p>
<p><em>CS:</em> Ah, that is true. Yes. So if you write the function with no arguments but remember that if weâre used to currying everything then weâre actually back to the sort of mathematical way of writing functions. So actually applying a function with no arguments youâd expect to be like f empty parentheses and then youâre back to getting this error message that says you know hey I found empty parentheses unit and I expected these these arguments. So only if you leave off the parentheses entirely, do you end up with the higher order function.</p>
<p><em>JB:</em> Okey</p>
<p><em>AL:</em> And I can certainly confirm from my own Haskell teaching experience that getting students to just drop the parentheses around the arguments of functions is one of the hardest things that you have to initially do so Iâm not surprised that it is relatively easy to get students to write them if you actually want them to do so.</p>
<p><em>CS:</em> Yeah, and that was actually another part of the reason for making that uncurrying decision is that I actually wanted students to feel like they were working with math in the notation that they had already learned in school and so that does involve parentheses around function arguments. Even if itâs just one function argument so actually one of these rules that I enforce before I will send your program to GHCJS is to ensure that anytime you have a function application that there are parentheses around the argument even if itâs only a single argument.</p>
<p><em>JB:</em> So given all of these list of things in which CodeWorld when you open it by default differs from Haskell Iâm too big of a fan of both CodeWorld and Haskell to not point out that there is a mode where you can still get the raw Haskell experience and just as a like a shameless plug here and there Iâve written a tutorial about teaching basic Haskell by implementing a game called Sokoban in CodeWorld in the normal Haskell mode so you can use it to learn Haskell and you get all the horrible error messages from GHC and you get to deal with type class and itâs all there so.</p>
<p><em>CS:</em> So to be clear if you go to https://code.world/, you will get everything that weâve been talking about in this podcast where youâve got this modified simplified version of the Haskell programming language. But if you go to https://code.world/haskell then you will get the the exact same tools, the sort of web-based environment in which you can write your code and run your code and see it in the browser but everything is back to the standard Haskell prelude and a version of the graphics library that follows Haskell conventions and things like that. So yeah itâs really important to me that you can do both that Iâve got this sort of you know that thereâs the version thatâs intended for teaching younger students and then thereâs the version which is actual Haskell and Iâm certainly not opposed to Haskell I think this is something that Iâve run into a few times where people have said you think Haskell is too complicated and needs to be simplified. Itâs like only for my 12 year old students who are there to learn mathematics and not to learn Haskell. Iâm a big fan of the Haskell programming language. Itâs just that thereâs a question of audience and goals.</p>
<p><em>AL:</em> To turn this around briefly is the simplified language also available without the web-based environment?</p>
<p><em>CS:</em> No, itâs not. It would be interesting to look into that I think one immediate problem you would run into is that the way that we implement equality comparison depends very much on the fact that youâre using GHCJS as your compiler.</p>
<p><em>JB:</em> But that could be solve. We have this GHC heap view library in GHC which inspects the heap and you can just distinguish the data constructors and as long as you donât care too much about what equality does on functions. Umâ¦</p>
<p><em>CS:</em> Yeah, that would be great and in fact I know that there are bugs in the GHCJS equality comparison. So if you have an idea for how to fix that by all means I would encourage you to talk to me about it because I think like I said the equality comparison is actually subtly broken in some cases right now that is an open bug with CodeWorld. So I would love to get a sort of more correct implementation that would be guaranteed to work and.</p>
<p><em>JB:</em> Well, the other rotation is doing the same horrible hack just doing it on the running heap of a like a natively compelled Haskell program so it wouldnât help you in the GHCJS environment and you would probably get a different set of obscure bugs, which may or may not be better, but it could be good enough for people who really want to run this locally so thatâs I think that might be an interesting project.</p>
<p><em>CS:</em> Yeah, I think in some sense the goal comes into mind here where if your goal is to sort of teach a computational thinking sort of class which is the goal behind the educational variant of CodeWorld then in some sense you kind of donât care about getting close to the Haskell programming language because teaching Haskell is not your goal in the first place. If your goal is to teach Haskell then ultimately it feels like youâre using the webish environment as a crutch to avoid getting stuck on installation in the first few weeks right? But if youâre teaching Haskell you eventually do want your students to have installed their local tools and have the normal tools thatâs available for the Haskell programming language. So thereâs a bit of correlation between the goals.</p>
<p><em>JB:</em> Yeah, and you can get as far as I know the graphics part of CodeWorld as a native library.</p>
<p><em>CS:</em> Yes, so there is a library that implements the graphics API for CodeWorld called codeworld-api and you can definitely write your programs using that API and then build them locally using native Haskell using that API. But thatâs only for programs written at the CodeWorld/Haskell variant of CodeWorld. If you have the educational variant then there is right now no way to install those build tools locally.</p>
<p><em>AL:</em> Okay I would like to go back to the to the teaching aspect actually. So you said the first few years you just used Haskell and then you set out to implement code world and did you then get the chance to actually try this out with students and did you actually experience that they react to this new environment in a better or different way?</p>
<p><em>CS:</em> Oh yes, absolutely so Iâve spent more effort teaching with CodeWorld than I have writing you know, building CodeWorld. Not lately because covid19 makes it difficult to volunteer in schools. But prior to that I was always volunteering in at least one school most of the time to teach using the CodeWorld environment and a lot of my decisions were guided by my experiences doing that. So I will say that when teaching with just plain Haskell it was very much one of these things where we were back to everything was very top down instructor led. Someone would have an idea and I would sit down and pair-program with them how to get that idea from their, you know drawing board, to having a working program but I definitely did not achieve the goal that I had that students could sit down and build something you know, build more of their own ideas after they left the classroom and so that was really my main motivation for changing things around was that thatâs. That was the goal that I wanted. I wanted not just to have students who could sort of pair-program this idea with me and then be happy that they had created something but you know in collaboration with an expert. I wanted to get them to the point where then in the summer after they had worked with me, they could sit down and they could make something different and this is an experience that Iâve had Iâve actually had students now send me animations or things like that that they have made in CodeWorld, entirely on their own after my classes have finished and thatâs thatâs a great thing. It makes me very happy.</p>
<p><em>AL:</em> And what do you think is the decisive or the most decisive difference that enables the success? I mean is it the environment? Is it the error messages? Is it like um.</p>
<p><em>CS:</em> Oh itâs a combination of a lot of this. I think the error messages are maybe the smallest piece. The choice of a very simple API I think is a really important step in that direction. And I know Joachim has worked with me, we actually wrote an ICFP paper together on building an API for multiplayer gaming that sort of follows this very simplistic and very declarative model and it was interesting how many constraints that put on us in terms of you know, it was like the the there was just barely this narrow path for the API to actually be implementable and still look like we wanted it to look and that that kind of simplicity actually turned out to be really important and then I think just the little details of things like you know making currying match familiar syntax things like that play a big step as well. Though, I think the API is the biggest part.</p>
<p><em>JB:</em> Do people actually use this multiplayer online gaming thing.</p>
<p><em>CS:</em> Oh people did. Itâs not something that Iâve pushed or taught with lately but it has been something that Iâve done a little bit with. I will say that most of my teaching experience ends up stopping on the drawing and animation side of things because there is something about building stateful games with state transition functions and things like that which I think it could be really successful if you had a full school year to teach it. But thatâs a lot of time to wrestle out of the hands of a school district to be able to say let me do you know daily class for an entire school year just on this one activity. Itâs a difficult case to make and so what I ended up getting instead is offers to come in once or twice a week for a semester or something like that. And then thereâs you know at the ages that Iâm looking at you just need to keep things simpler so in some senses I rarely have gotten to the point of anyone using this stateful game API in the first place and therefore I havenât gotten people to use the multiplayer game variant of that. But I think the multiplayer game variant is not that big a step over the single player game variant.</p>
<p><em>JB:</em> Yeah yeah I have a vague recollection of sitting in a pub in Oxford after ICPF with somebody else I forgot who it was and we were implementing a collaborative text editor based on this where you could both type and it would like have two cursors and it would just resolve conflicts because thatâs part of the the idea behind this lock step simulation mechanism it kind of worked so is it definitely fun to play around once you are past this step where a state transition function is no longer scary but that isnât the target audience. Maybe people going to ICFP.</p>
<p><em>CS:</em> Yes, right? It was definitely fun to build though. So I donât regret it.</p>
<p><em>AL:</em> Basically one lesson to take away also in general is if you want your Haskell libraries to be successful is invest a lot of effort in a good API I guess.</p>
<p><em>CS:</em> Yeah I think thatâs actually a great lesson to learn.</p>
<p><em>AL:</em> And you use that so abstractly now but can you summarize what sort of makes an API easy to understand and easy to use and in your opinion or what are your experiences.</p>
<p><em>CS:</em> Oh yeah I think what sort of guided my CodeWorld API implementation was just this notion that everything had to be as declarative as possible and then that actually has surprising you know implications once you start sort of drawing that through the whole process observing how people respond to the API. You know I sometimes looked at it as I was you know doing this in more of an experimental way that I was looking at how the students that I was teaching interacted with the API and then I was making changes to suddenly discourage the things that I didnât want them to do and to encourage the things that I did want them to do. I think one example of this thatâs come up in a conversation recently is you know pictures in this API form a monoid where you can take two pictures and combine them which just overlays one on top of the other and initially I think if you think about this from a very imperative standpoint you think of the painterâs algorithm where you paint the stuff in the back first and then you paint the stuff in the front on top of it and so you expect like picture a combine picture b to b picture a in the back and then picture b is drawn on top of that. But itâs actually the other way around because I donât want someone to look at this and think oh this means draw picture a and then draw picture b. I want someone to think this means itâs a description of the picture that comes in from a combination of this picture and that picture and so if I put picture a in front and picture b in back then that is a perfectly good semigroup as well itâs a perfectly good operation but itâs one that does not encourage you to think of this operation as âand thenâ right you know draw this and then draw that. Instead it encourages you to think of it as like this is a complete picture as a declarative value, not as a set of instructions for drawing a picture but as a declarative value and thatâs a picture as a declarative value and then put this one in front of that one.</p>
<p><em>JB:</em> So you spend a lot of time thinking about how the language should look like for this particular target audience and you said that, well this is not the ideal Haskell but truly some of these things you could probably imagine being also good for Haskell as a language. So imagine we would replace the GHC Proposals Committee and the libraries committee with you being dictator. Which changes would you make to Haskell.</p>
<p><em>CS:</em> Oh thatâs a scary thought indeedâ¦ Which changes would I make to Haskell? I think that ouh, my gripes with Haskell tend to be mostly in the lines mmmâ¦.</p>
<p><em>JB:</em> But letâs start with something easy. You would probably I would assume you would say well text is definitely a better type than list of characters for textual data. Thatâs an easy one right?</p>
<p><em>CS:</em> Yeah, yeah I would say that some abstract text type would be an improvement over a list of characters that doesnât feel like a controversial point of view really? I think it would be difficult to find people who disagree with that.</p>
<p><em>JB:</em> I think, yeah I expect that the main disagreement is about itâs just too much change is too disruptive. But if you ignore that as well and you really get to say: okay, that hassle should be on and people for some reason donât worry about rewriting their code to adjust. So okay, we we get a better type for text. So what else?</p>
<p><em>CS:</em> Yes, yeah, look. Thatâs a small one. I think huhâ¦ I tend to not have a lot of opinions about this honestly, specifically because I have spent so much time thinking about something which is not the core use case for Haskell and so I do have opinions about that because thatâs something that Iâve observed that Iâve experienced when it comes to observing other Haskell programmers my experience is actually surprisingly limited. So, itâs only the last month and a half where I have worked with other Haskell programmers professionally in any way. So in some sense Iâm still not sure I have my head around the professional Haskell picture.</p>
<p><em>JB:</em> How does it feel like suddenly working on Haskell again in a professional capacity.</p>
<p><em>CS:</em> You know itâs really exciting I think it. Itâs really more for me about the project than it is about the programming language. But I do think that thereâs a correlation between the choice of programming language and the way that people think about the questions that theyâre approaching. So Iâve been working at Groq which is this hardware company and working on their sort of Assembler/Compiler Infrastructure, we call it the assembler but itâs more than an assembler. And the idea is to sort of be able to take I mean the the idea of the whole piece of the company that Iâm working in is to be able to take ah you know machine learning models and turn them into instructions that run on this this piece of hardware and, you know Itâs been an interesting adaptation because Iâve never worked with anything at this sort of low-level hardware level before so a lot of things that I have really only ever seen in a computer science class. You know one computer architecture class at a University and Iâm now actually seeing on a day-to-day basis. Has been an interesting adjustment. Itâs also been great in the sense that, and this may not be Haskell specific, but I think itâs like it is in some ways Haskell specific as well and that is I think like working for a large company with a lot of internal infrastructure one gets to depend on a lot of internal infrastructure and just assume that the things that youâre doing are being done with internal tools that have no relation to the world outside of your company. I think like one of the things thatâs been really nice about working in a Haskell company is that thereâs more interaction with the broader Haskell community, so Iâve actually been able to do a lot more upstream contributions to Haskell libraries, work on Haskell Language server and how it handles some things, things like that in addition to the internal software that Iâve been writing.</p>
<p><em>AL:</em> So now I have multiple questions at once actually because youâve given so many keywords here. So Iâm wondering in which order so one thing that I wanted to ask about which still relates back to CodeWorld actually but you mentioned Haskell language server right now and to some extend it feels like there are obvious connections between. I mean CodeWorld is also an integrated environment that does sort of on the fly feedback and so on and so forth. So is there anything that Haskell language server can learn from CodeWorld or is there anything that due to the presence of Haskell language server you could replace on CodeWorld and make much simpler? I mean is there any kind of synergy between these?</p>
<p><em>CS:</em> Yeah in some sense the two have picked very different directions to go in solving the same set of problems. CodeWorld because Iâm ultimately Iâm trying to keep as much of it as possible running in a web browser, Iâve ended up taking the direction of reimplementing bits of Haskell infrastructure in Javascript. Ah, and thatâs been the sort of approach to solving a lot of the environment feature problems. So like in the CodeWorld editor, for example, as youâre typing, the editor keeps a running dictionary of what modules have been imported and what symbols are available from those modules so that it can implement autocomplete things like that. In Haskell language server this of course lives on the server which is typically local host for Haskell language server because youâre normally working on a locally installed environment and so yeah, all of the stuff live on the server and it involves actually keeping open GHC sessions, things like that, which are in my mind sort of out of the question for CodeWorld. Because CodeWorld does not want to maintain the expense of having an open GHC session for every concurrent user that would be I think like one of the problems that I run into with CodeWorld is that first day of class where I tell everyone okay type in this first program and now hit run and then that instant you know I have a class full of sometimes you know 60 students and every one of them is hitting the server asking it to compile this program at exactly the same time and you know I have often scaled up resources for the server or or added replicas of the CodeWorld server before my first day of class for this reason. So if every time someone showed up in this environment and wanted to start writing some code I want I had to maintain sort of a new GHC session for them I think that would just get too costly. On the other hand with Haskell language server you assume that the language server is running on local host that the local host probably has nothing better to do and therefore you know itâs essentially free to just maintain a GHC session and you know get this information directly from GHC and allows them to do a lot more powerful things but I think things that ah, that would not scale cheaply enough for me to do them in CodeWorld. So I guess my answer to your question is that weâve taken very different approaches by necessity. And because of that itâs difficult to sort of cross-supply lessons from one to the other. I think maybe you could learn some lessons in terms of what features have worked and what features have not worked. You know, I would love to see. Yeah, on the other hand weâve sort of separately implemented a lot of the same features things like documentation and hover and auto-completeâ¦ I mean I guess these are just the sort of expected set of interactions that you have now.</p>
<p><em>AL:</em> One thing I noticed when I played with CodeWorld which I really liked as a feature but is probably going back to this non-currying decision to some extent that if youâre writing a function, it shows you which argument youâre currently in so it is sort of a type it has.</p>
<p><em>CS:</em> Um, yeah. Um, Oh yeah, yeah, that was.</p>
<p><em>AL:</em> Type signature and it highlights the parts of the tuple essentially where youâre just navigating.</p>
<p><em>CS:</em> Yes, and that does definitely depend on being able to assume that every function application involves a tuple of arguments and that way you can just sort of scan for commas and so forth and figure out where you know one argument youâre in.</p>
<p><em>AL:</em> Okay, so the other question that came up while you were talking about your new job was that you said it enables you to upstream more stuff to Haskell in general and I was wondering another thing that Iâve seen you work on and talk about recently is HMock. Does this also somehow come out of your new job or does it predate it?</p>
<p><em>CS:</em> Yeah, no this predates my new job. So HMock actually came from prior to my working on Haskell professionally. It came from a thought experiment and this thought experiment was what are the things that I do as you know at the time primarily a Java and C++ programmer professionally what are the things that we do on a regular basis on a sort of daily basis that I just donât know how to do in Haskell and so one big answer there comes with you know, writing unit tests using mocks is and I think people can have different opinions on the wisdom of writing unit tests using mocks ah, sometimes if you can avoid itâs good to avoid on the other hand itâs really helpful sometimes in isolating specific properties and saying I want to write a test that this specific glue layer works as itâs intended to do and those tests can really help with your level of confidence in a piece of software. But I didnât really have a great answer for how I would do something like this in Haskell and I think we should be clear about what a mock is because I think you know a what thereâs a set of terminology thatâs maybe not widely understood or not universal among software engineers about what a mock is versus what a fake is. So if you have a fake that means you know say Iâm interacting with the file system maybe if I donât want to actually read and write files then I will maintain some sort of in-memory implementation of a file system and then test that my code works properly against that. And thatâs what I would call a fake. What I would call a mock is if Iâve got something which has really no implementation at all and I really just want to say hey expect this function to be called with these arguments and this should be the result and if this function is called with those arguments that should be the result. So what happens is essentially the test says you know Iâve got this layer of abstraction sitting on top of that layer of abstraction Iâm going to sort of stub out the bottom layer of abstraction by just saying hey if this function is called with these arguments thatâs the answer and then Iâm going to test the the top layer of abstraction works correctly with respect to that sort of stubbed out implementation and it sort of isolates your testing at a certain layer. So itâs not a you know mock in that sense the way Iâm using the words are not fakes. They are something different. They they are.. Thereâs no implementation at all except that I say when you call this function I want you to you know when I call this function I want to get this answer.</p>
<p><em>JB:</em> So to make that bit more I mean. Iâm actually quite ignorant of all these testing strategies I usually do Click check and Iâm happy so actually like this prevendure to mock testing here. So taking your description to something concrete would that for example, be Iâm testing the sort function and Iâm mocking the comparison on the elements assuming the sort function is polymorphic?</p>
<p><em>CS:</em> Oh yeah yeah you might think about it that way. Although I think I would only apply mocks for effectful code. Um, so maybe you could mock out non effectful code thatâs an interesting. You certainly canât do it with HMock with my library so for the most part I think youâre looking at effectful code is where you want to apply these box. So a great example I think that Iâve sort of run with in presenting HMock is, suppose Iâm implementing a chat bot and I want to you know something like lambda bot or something like this and I want to you know, have it interact with people over a chat channel and then I want it to do the right things in response to the right incoming chat messages. Well, so I I essentially my chat bot has this function that says pull for incoming chat messages and it just sends a you know a channel identifier and it gets back a list of you know pairs of username and chat message or something like this. What I want to do is I want to say well the first time that this poll for incoming chat messages thing happens then it should get back, you know Alice says this and Bob says this and Chelsea says that right and the second time it gets called it should get back something different so you know, Edwards says this and Fernando says that or something like that and then I want to assert that this chat bot is sending the right messages back out to the chat channel in response to the incoming messages aimed at it.</p>
<p><em>JB:</em> So where do we have the two layers of abstraction here in this example</p>
<p><em>CS:</em> Right? So right? So the two layers of abstraction here are youâve got one abstraction layer which is you know interacting with the chat channel so pull for messages send a message things like that and youâve got this other higher level of abstraction which is like being a chatbot. And so what I want to do is I want to test the chatbot functionality but I donât want to test the interacting with the channel functionality that Iâm sort of assuming is correct and so wha I want to do is not have an implementation of of a chat channel. But rather to just be able to say like the first time you pull for messages youâll get these results and the second time you get those results and then I also want to be able to say things like and I expect that you will so you know call send chat that will be executed this many times with these arguments, and things like that. So Iâm essentially like Iâm talking about whatâs happening at the chat channel API, but then the thing thatâs actually interacting with that is the code that sits on top of this chat channel API that implements the chat Bot. And so I want to be able to sort of set up hereâs whatâs going to happen at the chat channel API layer and then I want to run my chat bot and assert that what really happens matches those expectations and so go ahead.</p>
<p><em>JB:</em> Okay.</p>
<p><em>AL:</em> So, if youâre designing anything like a testing library I imagine itâs very hard to do if you donât have anything to test that library on or try that library on out yourself. So what have you tried it on so far? Have you been putting it to use in CodeWorld or have you been putting it to use in some other hazard project.</p>
<p><em>CS:</em> I have not been getting it to use in CodeWorld. No thatâs an interesting idea and one that and then maybe I should look into. Although I think itâs not a great fit for CodeWorld because the CodeWorld API tries to be so concrete and declarative. You know thereâs no type classes and the whole design of HMock depends on well Iâm going to use type classes in this sort of traditional mtl way to abstract over my effects. Um, and so.</p>
<p><em>AL:</em> Right, but I was not so much thinking about sort of the just the surface CodeWorld language but the actual CodeWorld implementation right?</p>
<p><em>CS:</em> Yeah I think there are places within the implementation of CodeWorld that I could use HMock in order to do some more testing. So I think thatâs true. Itâs also difficult to test CodeWorld because a lot of CodeWorld is designed to run on top of GHCJS. Ah though I suppose thatâs not true of all of it. But I havenât used it there. To be honest, what I have done is Iâve applied sort of my expectations from many years of writing tests using mocks in Java and C++ and Iâd sort of know what I expect to have in a mock library that Iâm happy with and then itâs just been about doing that. The one really interesting application of HMock which I did not start out expecting was that I use HMock to test itself and specifically thereâs a lot of template Haskell code in HMock and Iâd like to test that template Haskell code but testing template Haskell code is challenging in some ways right? Ah, for one thing itâs hard to test the failure cases because they result in your tests not building. Well another thing that I ran into is that Iâm a really big fan of HPC for measuring test coverage, but HPC does not capture the code that runs only at build time via Template Haskell and so to sort of address these these kinds of problems actually set up a sort of an HMock API around the quasi type class thatâs used in Template Haskell to actually run the code that generates Haskell code at build time so that I can run it at runtime instead of at build time and so within the testing of HMock it actually mocks itself in it mocks the or it mocks the quasi type class in order to run its own Template Haskell generation code and sort of make assertions about what happens there. Itâs not typical mock testing. But I think thatâs one of the really powerful things about having a library like HMock is in this case Iâm not really so I wouldnât even say Iâm so much testing like a mock so much as I would say Iâm actually setting up the expectations by running some Template Haskell code in anticipation at build time, and then remembering the results and then setting those expectations so that when that same Template Haskell code is executed at runtime it will give the same results, and then I can therefore like sort of stub out the Template Haskell so that I can run it at test time. And it will have the same effects that it had when it ran at build time call the same code so that Iâll measure the same code coverage and so on as what happens when running this code at build time, so and then I can assert that, for example, it reports error messages when I want it to. And I can you know I can look at my HPC results and see oh look I didnât look at a lot of this this piece of depth of Haskell code right? here is never run by my test cases. So Iâve got a bunch of untested code right here which I should figure out why this code exists and write test cases that exercise it and this was actually this was actually really helpful. So I think like this is the one place where Iâve seen HMock really shine is in testing HMock! I found bugs and places where errors were not handled correctly. And places where you know I needed to test new cases things like this by using standard Haskell test tooling but in conjunction with using Mock on template haskell.</p>
<p><em>AL:</em> I just want to briefly interject. Perhaps it is just my misconception but I agree with you that HPC which is Haskell program coverage is great and I think it is actually very much underused or even like little known for some reason I mean I can only say that it is part of GHC. You donât need to do anything everybody should use it. Itâs a fantastic way of getting extra information about program coverage and, yeah I mean it just is a great little thing that so many people donât seem to know I donât know why.</p>
<p><em>CS:</em> Yeah I agree. Yeah I find it magical in some sense like Iâve used test coverage in other programming languages but in an eager evaluation programming language test coverage just tells you whether code was executed not whether you even looked at the result. But in Haskell and with HPC test coverage Iâve seen people just stare in amazement at the result of HPC because it will highlight the specific portion of their error message string that they did not look at or validate in their desk.</p>
<p><em>AL:</em> Right? Also because you get expression level granularity whereas in many other languages you only get sort of line level granularity. So yeah, itâs really very nice.</p>
<p><em>CS:</em> Yeah yeah I mean that like the granularity and also just the lazy evaluation lets you know when you know maybe okay, there was some code that filled in this value. But if I never looked at the value if no other behaviour depended on the value that filled it in then thatâs still untested code. So I yeah I agree I saw HPC for the first time when I was working on the snap framework with Gregory Collins and Doug Beardsley back in in 2011 and they you know had tooling set up so that you could look go look in there on the snap framework website and you could sort of see the HPC coverage for each module by unit tests and you know so I contributed some you know xml and html parsing and rendering code to thatâs used by heist there and saw that tool for the first time there and it was great. Yeah Iâve been a big fan of it ever since I think itâs maybe not the best maintained piece of code but it works.</p>
<p><em>JB:</em> Yeah I wish we had that for GHC just last week I was wondering about a certain case branch in GHC which I thought is probably dead code and what I did I replaced it with error and made a draft pull request against GHC and ran CI on it to see if it fails and indeed this code path was not taken. If I had had a HPC report created maybe automatically on the CI system could just say okay this code is dead and itâs not exercised by the test suite. So probably my theory that itâs actually not reachable is correct. So itâs also useful for that.</p>
<p><em>AL:</em> So HMock is basically ready for production use you would say? I mean so.</p>
<p><em>CS:</em> Yeah I think there are definitely people using it and Iâve heard good things from people who are using it. I hope to become a person whoâs using it at some point in the future. But I think I have to wait for the need to arise Iâm not going to force it into a hole where it doesnât fit. Um. So but I think itâs being used successfully by Haskell programmers. One thing that I would love to do more with is to sort of generalize it a bit and so Iâve resisted declaring anything to be one dot oh release yet. Because I know that there will be breaking API changes needed if I were to generate generalize HMock to other sort of effect systems. You know I would love to have you be able to mock out, you know, servant API calls very easily or Hazel or various effect system libraries like polysemy. Things like this. Currently, itâs very specialized to mtl style type classes which I think are the the low friction way to abstract over effects but are not necessarily what everyone is doing so I think I have some ideas for how this would work and I hope to get back to this and be able to sort of generalize this to the point where I can really say like hey no matter what no matter how youâve designed your effect systems and how youâve abstracted over those effects that you can you know you can use HMock somehow to mock those effects using you know, various different plugins or various different. You know HMock subsidiary libraries or something like that. So I havenât declared it to be stable for that reason Iâm still thinking about that problem and Iâve reached out and and talked to people about this question. I would love to have it generalized enough that itâs just sort of the default way to mock things in Haskell. Right now I think itâs a good default for mocking mtl style type classes in Haskell but there are a lot more things that should be mockable.</p>
<p><em>JB:</em> Okay, so to summarise Haskell the language you donât want to make any big changes Haskell the library ecosystem obviously had a big missing piece in terms of a mock library and we have there. So letâs talk about Haskell the community and ecosystem because itâs also a place where youâve been quite active in the last month maybe and in involvement with Haskell Foundation. So, tell us a little bit more what youâre doing there at the moment.</p>
<p><em>CS:</em> Yeah I think I really am excited by the Haskell Foundation which is now coming up on getting close to a year old if you count from the date of announcement maybe less if you count from the date of itâs having full-time employees. But and think itâs been really exciting to me to look at the Haskell Foundation as a mechanism for getting a lot of things done within the Haskell community and by getting things done I just mean like anything that kind of needs to get done. I feel like the foundation has a bit of a track record at this point and at least is well placed to be an encouraging force to make improvements to Haskell and so Iâve been pretty excited about this and Iâm made a decision to become a sort of financial contributor to the Haskell Foundation back over the summer and so I become that so Iâm contributing to the Haskell Foundation and that sort of makes the question a little bit more imperative to me of you know how can the Haskell Foundation be something that I feel as good as possible about contributing to and about supporting and so thereâs been a lot of conversations going on about this recently about you know what should the Haskell Foundation be doing that makes it a really attractive or even more attractive target for someone who says you know hey I want to support Haskell you know as a community just all of Haskell you know, right now there you know there are ways to support the Haskell.org committee which you know hosts the haskell.org website and some infrastructure things. There are ways to support GHC development. There are you know ways to support hls theyâve sort of got their own you know donation system set up, there are a million people not a million, maybe a dozen people who have set up, github sponsorships or patreon pages to support their work on the Haskell ecosystem. But as someone who says like I want to support Haskell itâs not clear to me that either of these is necessarily like the choice for saying I just want to you know help out the Haskell community and I think the Haskell Foundation has the potential to be that choice.</p>
<p><em>JB:</em> Simply by distributing the funds into these channels youâve just mentioned or do more than just.</p>
<p><em>CS:</em> Well, thatâs a good question right? Thatâs a good question I think itâs definitely more than just distributing funds. You know part of it is the Haskell Foundation is you know, well placed to build excitement and sort of bring the community together around projects. And I think you saw that with like the text utf8 project where, hereâs this this change that a lot of people have said is sort of a no-brainer for a long time but itâs at the same time when you get into the weeds of it you just lose momentum and little technical issues come up and thereâs not, at at some point you need the marketing push behind a project in order to push it through to success.</p>
<p><em>JB:</em> But is that I mean I really am really fond of this change but is this really the poster child example for a project that we need to ask the Foundation for I would.</p>
<p><em>CS:</em> Ah, you know I donât know I think I see it as a success story. Um, but I Ido think that there are different roles that the Haskell Foundation can play. I am really excited about one of the proposals thatâs sort of out there that Iâve been working on is to have a grant program to take contributions to the Haskell Foundation and find those areas within the Haskell Foundation where it could do some good and just say look if you are you know a thousand dollars short of being able to spend a month contributing toward a Haskell project you know and doing some open source work for a while then we want to be there with that thousand dollars to say well weâll help you meet the gap. Weâll help you know, match that need. And you essentially take someone itâs certainly not going to pay for full time developers to work on Haskell itâs more about finding accidents of opportunity right? Itâs about finding cases where someoneâs what someone is saying what I really want to be doing is working on improving Haskellâs GHC to Javascript cross compilation support via asterius or GHCJS or something like that and this is just an example you know, maybe somebodyâs like really all set for doing that and theyâre like well and Iâd love to be doing this but you know I just I still need to pay my rent. Um, you know, not that I want to be paid a competitive software engineering salary but I need to to be able to you know, eat dinner while I do it and you know they should be able to at least ask the question of hey does the Haskell community want to support me in doing this work. So thatâs one example I think there are other examples of how we how the the foundation could be more worth supporting as well. You know in some senses those go toward maybe we maybe the foundation should support events more than people or maybe the foundation should support, you know more outreach to newcomers or something like that. Yeah it so I think different people have different kinds of of ideas about how this works out, but itâs a good conversation to be having. So Iâll throw on a plug about this conversation which is that that Matthias Tope and I are thought I donât know how to pronounce his name I hope I got it right? But we are actually looking for people to join a committee which we call the foundation task force to help us sort of talk through the question of what these kinds of efforts might look like for the Haskell Foundation and we would definitely love to hear from people who have ideas and you know are excited about other ways that the foundation could be supportive to the community.</p>
<p><em>AL:</em> Yeah, this one is really exciting! I hope you win a lot of extra people for this effort and succeed in effecting some changes. So I mean I want to perhaps as a final topic, to talk about another way in which Iâve recently seen you engage with the community and that is that you I think recently started I think itâs called a co-hack a virtual co-hack beat up.</p>
<p><em>CS:</em> Yeah, yeah, thatâs actually got a bit of history behind it. So when I was living in New York working for Googleâs education group there the New York Haskell user group started these meetings and I ran these with the New York Haskell user group as a sort of in-person meeting. Microsoft actually donated some office space for us on weekends and weâd get together a group of people and weâd sit around and weâd just work on Haskell projects together and you know itâd be everything from you know, somebody coming in to say hey I want to understand monads by implementing monads in python and so you know they work on that or you know a lot of times we get people coming in with some rather heavy like category theory ideas they wanted to work on or some people are just saying hey I want to work Haskell you know, let me start with a Haskell project and does anyone want to help me out set it out and we would spend 4 or 5 hours in this conference room and just people kind of talking to each other and working together on things order pizza you know, but it was a lot of fun. Actually the idea there came from Daniel Cartwright also known as chesseye started something similar to this in Atlanta. Which I attended here in Atlanta and then sort of expand that expanded to the co-hack in New York. After covid obviously you know Microsoft Research stopped donating in-person meeting space since everyoneâs virtual now and so thatâs sort of shut down. So lately Iâve just been missing that and so Iâve started to try to organize over zoom as you know the the best we can get at reproducing this kind of social, you know low-key social meeting of Haskellers to get together to work on projects together to meet each other so you know every month we get together and you know assign people to random breakout rooms to meet other people there at the meeting and then you know various people give pitches about things that theyâd like to work on work that theyâd like to do stuff that theyâd like to learn etc and then we just break up into groups and work together on things for a few hours. Itâs been a lot of fun.</p>
<p><em>AL:</em> That sounds really cool. So I guess if youâre organizing something like this and advertise it globally then you can end up with either 3 participants or 500.</p>
<p><em>CS:</em> Yeah, itâs been closer to maybe a dozen or so than 500 recently but weâll see which structure it goes. I mean honestly if four or five people show up and there are four or five people who have fun together then itâs worth doing.</p>
<p><em>AL:</em> So do you pick some theme or topic for these sessions in advance or is it completely self-organizing essentially.</p>
<p><em>CS:</em> It is completely self-organizing. We do have a period of time set up for anyone who wants to give a pitch. So if someone shows up with their own project and says I would like to you know work on this particular project during this time period and Iâd like some help some pair programming or you know or someone to jump in and work on it with me then they could give a pitch and weâll create a breakout room for them so people can come join their rooms and you know they could talk to each other. But aside from that itâs just whatever people want to do.</p>
<p><em>AL:</em> And is the tooling up for this kind of stuff? I mean how do people usually do this? Is one person sharing their screen and the others are looking at it or are you using some official visuals your live share?</p>
<p><em>CS:</em> Yeah, within each of the rooms I think itâs typical that maybe one person is sharing a screen and other people are sort of following along there. But thereâs no real rule about tooling. So if someone wanted to use the like code, the VSCode extension</p>
<p><em>AL:</em> CodeWorld</p>
<p><em>CS:</em> That well I mean if someone wanted to use CodeWorld, they could do that. If someone wanted to there is like a vs-code extension that lets like multiple people work in the same code file at the same time Iâve forgotten what itâs called to be honest, but if someone wanted to push for that they could do that too. But itâs all organized through zoom and so sort of screen sharing is the easy thing to do you just click the button saying share my screen and then anyone in the room can see the screen.</p>
<p><em>JB:</em> So that sounds cool which channels do I have to watch to and learn about the next one?</p>
<p><em>CS:</em> Oh, I try to announce it on like Twitter, haskell-cafe, haskell-reddit, haskell-discourse. Um, so.</p>
<p><em>JB:</em> Okay, so I have to try really hard to not notice the next announcementâ¦</p>
<p><em>CS:</em> I think that probably you probably would have to try pretty hard to not notice. Yeah, so that would yeah I guess the podcast will be delayed so it does not good to say that this Saturday is the next one because it will be after this Saturday when the podcast gets released.</p>
<p><em>JB:</em> Well cool! I think that sounds exciting. Maybe Iâll see the two of you at one of these future co-hacks! I hope I see many of our listeners at these future co-hacks and I think with this Iâd like to thank Chris for this very interesting hour of conversation.</p>
<p><em>CS:</em> Thank you.</p>
<p><em>JB:</em> And I hope to have all the listeners again at one of future episodes and until then have a good time.</p>
<p><em>CS:</em> Thanks!</p>
    </div>
  </div>
  
</div>

    </div>

    <div class="max-w-screen-xl mx-auto text-center sm:px-12 md:px-12 lg:px-16 mt-32">
  <div class="font-bold">SPONSORS</div>

  <div class="mt-16">
    <div class="font-bold">Gold</div>
  </div>
  <div class="flex flex-wrap items-center justify-center">
    
    <a href="https://iohk.io/" target="_blank" class="block w-48 m-4"><img alt="IOHK" src="../../assets/images/sponsors/iohk/iohk-683.png" srcset="../../assets/images/sponsors/iohk/iohk-200.png 200w, /assets/images/sponsors/iohk/iohk-400.png 400w, /assets/images/sponsors/iohk/iohk-683.png 683w"></a>
    
    <a href="https://juspay.in" target="_blank" class="block w-48 m-4"><img alt="Juspay" src="../../assets/images/sponsors/juspay/juspay_logo.png"></a>
    
    <a href="https://mercury.com/" target="_blank" class="block w-48 m-4"><img alt="Mercury" src="../../assets/images/sponsors/mercury/mercury.png"></a>
    
  </div>

  <div class="mt-16">
    <div class="font-bold">Silver</div>
  </div>
  <div class="flex flex-wrap items-center justify-center">
    
    <a href="https://www.sc.com/en/" target="_blank" class="block w-36 m-4"><img alt="Standard Chartered" src="../../assets/images/sponsors/standard-chartered/scb-logo.png"></a>
    
    <a href="https://tweag.io/" target="_blank" class="block w-36 m-4"><img alt="Tweag" src="../../assets/images/sponsors/tweag/tweag-683.png" srcset="../../assets/images/sponsors/tweag/tweag-200.png 200w, /assets/images/sponsors/tweag/tweag-400.png 400w, /assets/images/sponsors/tweag/tweag-683.png 683w"></a>
    
    <a href="https://well-typed.com/" target="_blank" class="block w-36 m-4"><img alt="Well-Typed" src="../../assets/images/sponsors/well-typed/well-typed-683.png" srcset="../../assets/images/sponsors/well-typed/well-typed-200.png 200w, /assets/images/sponsors/well-typed/well-typed-400.png 400w, /assets/images/sponsors/well-typed/well-typed-683.png 683w"></a>
    
  </div>

  <div class="mt-16">
    <div class="font-bold">Bronze</div>
  </div>
  <div class="flex flex-wrap items-center justify-center">
    
    <a href="https://www.channable.com/" target="_blank" class="block w-24 m-4"><img alt="Channable" src="../../assets/images/sponsors/channable/channable-683.png" srcset="../../assets/images/sponsors/channable/channable-200.png 200w, /assets/images/sponsors/channable/channable-400.png 400w, /assets/images/sponsors/channable/channable-683.png 683w"></a>
    
    <a href="https://www.digitalocean.com" target="_blank" class="block w-24 m-4"><img alt="DigitalOcean" src="../../assets/images/sponsors/digital-ocean/DO-logo-683.png" srcset="../../assets/images/sponsors/digital-ocean/DO-200.png 200w, /assets/images/sponsors/digital-ocean/DO-400.png 400w, /assets/images/sponsors/digital-ocean/DO-logo-683.png 683w"></a>
    
    <a href="https://opensource.google/" target="_blank" class="block w-24 m-4"><img alt="Google" src="../../assets/images/sponsors/google/google-683.png" srcset="../../assets/images/sponsors/google/google-200.png 200w, /assets/images/sponsors/google/google-400.png 400w, /assets/images/sponsors/google/google-683.png 683w"></a>
    
    <a href="https://qbaylogic.com/" target="_blank" class="block w-24 m-4"><img alt="QBayLogic" src="../../assets/images/sponsors/qbaylogic/qbaylogic-683.png" srcset="../../assets/images/sponsors/qbaylogic/qbaylogic-200.png 200w, /assets/images/sponsors/qbaylogic/qbaylogic-400.png 400w, /assets/images/sponsors/qbaylogic/qbaylogic-683.png 683w"></a>
    
    <a href="https://tripshot.com/" target="_blank" class="block w-24 m-4"><img alt="TripShot" src="../../assets/images/sponsors/tripshot/Tripshot_Logo_RGB.png"></a>
    
  </div>
</div>

<div class="mt-20 bg-gray-800 w-full py-20">
  <div class="max-w-screen-xl mx-auto text-gray-300 text-lg px-6 lg:px-16">

    <div class="flex flex-col space-y-8 text-center lg:flex-row lg:space-y-0">
      <div class="lg:flex space-y-4 lg:gap-2 lg:flex-grow lg:space-y-0">
        <div class="font-medium mt-1">To learn more about the Haskell Foundation </div>
        <div class="ml-2">
          <a href="../../contact" class="arrow-link light">>> contact us</a>
        </div>
      </div>

      <div class="flex space-x-4 w-44">
        <a href="https://twitter.com/haskellfound" target="_blank" class="text-4xl block"><span class="fab fa-twitter"></span></a>
        <a href="https://www.linkedin.com/company/haskell-foundation-inc" target="_blank" class="text-4xl block"><span class="fab fa-linkedin-in"></span></a>
        <a href="https://discourse.haskell.org/c/haskell-foundation/11" target="_blank" class="text-4xl block"><span class="fab fa-discourse"></span></a>
        <a rel="me" href="https://mastodon.social/@haskell_foundation" target="_blank" class="text-4xl block"><span class="fab fa-mastodon"></span></a>
        <a href="https://www.youtube.com/@HaskellFoundation" target="_blank" class="text-4xl block"><span class="fab fa-youtube"></span></a>
        <a href="https://github.com/haskellfoundation" target="_blank" class="text-4xl block"><span class="fab fa-github"></span></a>
      </div>
    </div>

    <div class="flex flex-row">
      <div class="mt-16 flex flex-col text-center flex-grow lg:flex-row lg:space-x-8 lg:space-y-0">
        <img src="../../assets/images/logos/hf-logo-100-alpha.png" class="h-8" alt="Logo of the Haskell Foundation" />
        <div class="font-medium">2024 Â© Haskell Foundation, <a href="https://github.com/haskellfoundation/haskellfoundation.github.io">submit website bug reports and fixes on GitHub</a></div>
      </div>

      <div class="text-sm mt-6 flex ml-8 flex-col justify-items-start text-left">
        <div>Haskell Foundation, Inc.</div>
        <div>2093 Philadelphia Pike #8119</div>
        <div>Claymont, DE 19703</div>
        <div>USA</div>
      </div>
    </div>

  </div>
</div>

  </div>

</body>

</html>
